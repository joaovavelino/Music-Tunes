(this.webpackJsonpmusictunes=this.webpackJsonpmusictunes||[]).push([[0],{30:function(t,e,n){},41:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),c=n(22),i=n.n(c),s=(n(30),n(16)),o=n(2),u=n(3),l=n(5),d=n(4),j=n(14),h=n(6),b=n(8),p=n.n(b),O=n(11),f=n(7),v="user",m=function(t){return localStorage.setItem(v,JSON.stringify(t))},x=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},g=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(v));null===e&&(e={}),x(e)(t)}))},k=n(0),y=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(k.jsx)("h1",{children:"Carregando..."})}}]),n}(r.a.Component),S=y,C=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={user:""},t.updateUserState=t.updateUserState.bind(Object(f.a)(t)),t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.updateUserState()}},{key:"updateUserState",value:function(){var t=Object(O.a)(p.a.mark((function t(){var e,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:e=t.sent,n=e.name,this.setState({user:n});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state.user;return Object(k.jsx)("header",{"data-testid":"header-component",children:""===t?Object(k.jsx)(S,{}):Object(k.jsxs)("div",{children:[Object(k.jsx)(j.b,{"data-testid":"link-to-search",to:"/search",children:"Search"}),Object(k.jsx)(j.b,{"data-testid":"link-to-favorites",to:"/favorites",children:"Favorites"}),Object(k.jsx)(j.b,{"data-testid":"link-to-profile",to:"/profile",children:"Profile"}),Object(k.jsx)("h1",{"data-testid":"header-user-name",children:t})]})})}}]),n}(a.Component),I=C,w=function(){var t=Object(O.a)(p.a.mark((function t(e){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=w,D=n(25),F="favorite_songs";JSON.parse(localStorage.getItem(F))||localStorage.setItem(F,JSON.stringify([]));var L=function(){return JSON.parse(localStorage.getItem(F))},P=function(t){return localStorage.setItem(F,JSON.stringify(t))},V=function(t){return function(e){setTimeout((function(){e(t)}),500)}},M=function(t){return new Promise((function(e){if(t){var n=L();P([].concat(Object(D.a)(n),[t]))}V("OK")(e)}))},B=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={loading:!1,check:!1},t.saveFavSong=t.saveFavSong.bind(Object(f.a)(t)),t.verifyLocalStorage=t.verifyLocalStorage.bind(Object(f.a)(t)),t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.verifyLocalStorage()}},{key:"saveFavSong",value:function(){var t=Object(O.a)(p.a.mark((function t(e){var n,a,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.target,this.setState({loading:!0}),a=this.props.allSongs,r=a.slice(1).find((function(t){return t.trackId===Number(n.name)})),t.next=6,M(r);case 6:this.setState({loading:!1,check:!0});case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"verifyLocalStorage",value:function(){var t=this.props.music.trackId;JSON.parse(localStorage.getItem("favorite_songs")).some((function(e){return e.trackId===t}))&&this.setState({check:!0})}},{key:"render",value:function(){var t=this.props.music,e=t.trackName,n=t.previewUrl,a=t.trackId,r=this.state,c=r.loading,i=r.check;return c?Object(k.jsx)(S,{}):Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{children:e}),Object(k.jsxs)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:[Object(k.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(k.jsx)("code",{children:"audio"})]}),Object(k.jsxs)("label",{htmlFor:"inputFav",children:["Favorita",Object(k.jsx)("input",{type:"checkbox",checked:i,id:"inpuFav","data-testid":"checkbox-music-".concat(a),onChange:this.saveFavSong,name:a})]})]})}}]),n}(a.Component),J=B,U=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={musics:null,loading:!0},t.searchMusics=t.searchMusics.bind(Object(f.a)(t)),t.requestFavSongs=t.requestFavSongs.bind(Object(f.a)(t)),t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.searchMusics(),this.requestFavSongs()}},{key:"requestFavSongs",value:function(){var t=Object(O.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.next=3,new Promise((function(t){var e=L();V(e)(t)}));case 3:this.setState({loading:!1});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"searchMusics",value:function(){var t=Object(O.a)(p.a.mark((function t(){var e,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match.params.id,t.next=3,N(e);case 3:n=t.sent,this.setState({musics:n,loading:!1});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.musics;if(!t.loading){var n=e[0],a=n.artistName,r=n.collectionName;return Object(k.jsxs)("div",{children:[Object(k.jsx)(I,{}),Object(k.jsx)("p",{"data-testid":"artist-name",children:a}),Object(k.jsx)("p",{"data-testid":"album-name",children:"".concat(a,": ").concat(r)}),e&&e.slice(1).map((function(t,n){return Object(k.jsx)("div",{children:Object(k.jsx)(J,{music:t,allSongs:e})},n)}))]})}return Object(k.jsx)(S,{})}}]),n}(a.Component),T=U,q=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{"data-testid":"page-favorites",children:[Object(k.jsx)("p",{children:"Favorites"}),Object(k.jsx)(I,{}),Object(k.jsx)("p",{children:"Work in progress"})]})}}]),n}(a.Component),A=q,R=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={storage:!1},t.verifyLocal=t.verifyLocal.bind(Object(f.a)(t)),t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){setInterval(this.verifyLocal,1500)}},{key:"verifyLocal",value:function(){localStorage.getItem("user")&&this.setState({storage:!0})}},{key:"render",value:function(){var t=this.state.storage;return Object(k.jsx)("div",{children:t?Object(k.jsx)(h.a,{to:"/search"}):Object(k.jsx)("h1",{children:"Carregando..."})})}}]),n}(a.Component),E=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={inputText:"",buttonDisable:!0,redirect:!1},t.handleChange=t.handleChange.bind(Object(f.a)(t)),t.changeButton=t.changeButton.bind(Object(f.a)(t)),t.handleClick=t.handleClick.bind(Object(f.a)(t)),t.verifyLocalStorage=t.verifyLocalStorage.bind(Object(f.a)(t)),t}return Object(u.a)(n,[{key:"handleChange",value:function(t){var e=t.target;this.setState({inputText:e.value},this.changeButton)}},{key:"handleClick",value:function(){var t={name:this.state.inputText};this.setState({redirect:!0}),function(t){new Promise((function(e){m(Object(s.a)(Object(s.a)({},{name:"",email:"",image:"",description:""}),t)),x("OK")(e)}))}(t)}},{key:"changeButton",value:function(){var t=!0;this.state.inputText.length>=3&&(t=!1),this.setState({buttonDisable:t})}},{key:"verifyLocalStorage",value:function(){localStorage.getItem("user")&&this.setState({redirect:!0})}},{key:"render",value:function(){var t=this.state,e=t.buttonDisable,n=t.inputText,a=t.redirect;return Object(k.jsx)("div",{"data-testid":"page-login",children:a?Object(k.jsx)(R,{}):Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{children:"login"}),Object(k.jsxs)("label",{htmlFor:"login-name-input",children:[Object(k.jsx)("input",{type:"text","data-testid":"login-name-input",placeholder:"Digite seu Login",value:n,onChange:this.handleChange}),Object(k.jsx)("button",{disabled:e,type:"submit","data-testid":"login-submit-button",onClick:this.handleClick,children:"Entrar"})]})]})})}}]),n}(a.Component),K=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{"data-testid":"page-not-found",children:Object(k.jsx)("p",{children:"Page not found"})})}}]),n}(a.Component),W=K,_=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{"data-testid":"page-profile",children:[Object(k.jsx)("p",{children:"Profile"}),Object(k.jsx)(I,{}),Object(k.jsx)("p",{children:"Work in progress"})]})}}]),n}(a.Component),z=_,G=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(k.jsx)("p",{children:"Profile Edit"}),Object(k.jsx)(I,{})]})}}]),n}(a.Component),H=G,Q=n(18),X=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.data,e=t.artistId,n=t.artistName,a=t.collectionId,r=t.collectionName,c=t.collectionPrice,i=t.artworkUr100,s=t.releaseDate,o=t.trackCount;return Object(k.jsxs)("div",{children:[Object(k.jsx)(j.b,{"data-testid":"link-to-album-".concat(a),to:{pathname:"/album/".concat(a),state:{name:n,album:r}},children:"More Details"}),Object(k.jsx)("p",{children:e}),Object(k.jsx)("p",{children:n}),Object(k.jsx)("p",{children:a}),Object(k.jsx)("p",{children:r}),Object(k.jsx)("p",{children:c}),Object(k.jsx)("img",{src:i,alt:n}),Object(k.jsx)("p",{children:s}),Object(k.jsx)("p",{children:o})]})}}]),n}(a.Component),Y=X,Z=function(){var t=Object(O.a)(p.a.mark((function t(e){var n,a,r,c,i,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return r=t.sent,t.next=7,r.json();case 7:return c=t.sent,i=c.results,s=i.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$=Z,tt=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={inputValue:"",buttonDisable:!0,loading:!1,apiStatus:!1,lastedInput:""},t.handeChange=t.handeChange.bind(Object(f.a)(t)),t.verifyButton=t.verifyButton.bind(Object(f.a)(t)),t.clearInputValue=t.clearInputValue.bind(Object(f.a)(t)),t.handleClick=t.handleClick.bind(Object(f.a)(t)),t.changeApiStatus=t.changeApiStatus.bind(Object(f.a)(t)),t}return Object(u.a)(n,[{key:"handleClick",value:function(){var t=Object(O.a)(p.a.mark((function t(){var e,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.inputValue,this.setState({loading:!0}),t.next=4,$(e);case 4:n=t.sent,this.setState({loading:!1,apiResult:n},this.clearInputValue),void 0!==n[0]&&this.changeApiStatus();case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handeChange",value:function(t){var e=t.target;this.setState(Object(Q.a)({},e.name,e.value),this.verifyButton)}},{key:"changeApiStatus",value:function(){this.setState({apiStatus:!0})}},{key:"verifyButton",value:function(){var t=!0;this.state.inputValue.length>=2&&(t=!1),this.setState({buttonDisable:t})}},{key:"clearInputValue",value:function(){var t=this.state.inputValue;this.setState({lastedInput:t,inputValue:""})}},{key:"render",value:function(){var t=this.state,e=t.inputValue,n=t.buttonDisable,a=t.loading,r=t.apiResult,c=t.apiStatus,i=t.lastedInput;return Object(k.jsxs)("div",{"data-testid":"page-search",children:[Object(k.jsx)(I,{}),Object(k.jsxs)("section",{children:[Object(k.jsx)("label",{htmlFor:"search-artist-input",children:Object(k.jsx)("input",{type:"text","data-testid":"search-artist-input",placeholder:"Digite sua pesquisa",name:"inputValue",onChange:this.handeChange,value:e})}),Object(k.jsx)("button",{type:"submit","data-testid":"search-artist-button",disabled:n,onClick:this.handleClick,children:"Pesquisar"})]}),a&&Object(k.jsx)(S,{}),c&&Object(k.jsx)("p",{children:"Resultado de \xe1lbuns de: ".concat(i)}),c?r.map((function(t,e){return Object(k.jsx)(Y,{data:t},e)})):Object(k.jsx)("div",{children:"Nenhum \xe1lbum foi encontrado"})]})}}]),n}(a.Component),et=tt,nt=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(k.jsx)(j.a,{children:Object(k.jsxs)(h.d,{children:[Object(k.jsx)(h.b,{exact:!0,path:"/",component:E}),Object(k.jsx)(h.b,{path:"/search",component:et}),Object(k.jsx)(h.b,{path:"/album/:id",render:function(t){return Object(k.jsx)(T,Object(s.a)({},t))}}),Object(k.jsx)(h.b,{path:"/favorites",component:A}),Object(k.jsx)(h.b,{exact:!0,path:"/profile",component:z}),Object(k.jsx)(h.b,{exact:!0,path:"/profile/edit",component:H}),Object(k.jsx)(h.b,{path:"*",component:W})]})})}}]),n}(r.a.Component),at=nt;i.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(at,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.523542a4.chunk.js.map